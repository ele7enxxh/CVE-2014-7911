#include <android/log.h>
#include <pwd.h>
#include <grp.h>
#include <stdio.h>

#define TAG "auo_exploit"
#define LOGD(...) __android_log_print(ANDROID_LOG_DEBUG, TAG, __VA_ARGS__)

int main() {
	char id_uid[256];
	char id_gid[256];
	uid_t uid;
	gid_t gid;
	struct passwd *pw;
	struct group *gr;

	uid = getuid();
	pw = getpwuid(uid);
	if (pw) {
		sprintf(id_uid, "%d(%s)", uid, pw->pw_name);
	}
	else {
		sprintf(id_uid, "%d", uid);
	}
	gid = getgid();
	gr = getgrgid(gid);
	if (gr) {
		sprintf(id_gid, "%d(%s)", gid, gr->gr_name);
	}
	else {
		sprintf(id_gid, "%d", gid);
	}

	LOGD("uid=%s gid=%s\n", id_uid, id_gid);
}
